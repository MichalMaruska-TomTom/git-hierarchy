#!/usr/bin/zsh -feu

# read from stdin.

while read line;
do
    name=${line%%	*}
    ref_link=${line#*	}

    if false; then
	echo $name
	echo $ref_link
    fi

    if true;
	# ! git symbolic-ref $name &>/dev/null ;
    then
	# remove "ref: "
	ref=${ref_link#ref: *}

	cecho yellow "need to create $name"
	git symbolic-ref $name "$ref"

	if [[ $ref =~ "^refs/heads/" ]]; then
	    if ! git symbolic-ref $ref &> /dev/null;
		then
		cecho red "possibly need to localize the branch $ref"
	    fi
	fi
    fi

done
