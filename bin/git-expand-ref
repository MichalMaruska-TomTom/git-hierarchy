#!/usr/bin/zsh -feu

# This is about S.Ref `resolution':
# turning the input from user into fully-qualified S.Ref name.


expand_ref()
{
    name=$1
    case $name in
	refs/*)
	    ;;
	heads/*)
	    name=refs/$name
	    ;;
	remotes/*)
	    name=refs/$name
	    ;;
	tags/*)
	    name=refs/$name
	    ;;
	#*/*)
	    # name=refs/$name
	    # ;;
	*)
	    name=$(git show-ref heads/$name|head -n 1|cut -f 2 '-d ') || \
	    name=$(git show-ref remotes/$name|head -n 1|cut -f 2 '-d ') || \
	    name=$(git show-ref $name|head -n 1|cut -f 2 '-d ')
	    # name=refs/heads/$name
	    # prepend refs/
    esac

    echo $name
}


expand_ref $1
