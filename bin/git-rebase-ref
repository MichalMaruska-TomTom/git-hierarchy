#! /usr/bin/zsh -feu

source /usr/share/git-hierarchy/functions.sh
GIT_DIR=$(git_dir)
SUM_DIR=$GIT_DIR/mmc


# rebasing this ref, upon its base.
# The base is somehow defined ...
name=$1


cmd=
# cmd=echo

if is_sum $name
then
    # sum? ->
    $cmd git-sum-branches -r $name
elif is_segment $name;
then
# segment ->
    $cmd git-rebase-segment $name
else
    echo "unknown -- leaving unchanged $name"
fi
